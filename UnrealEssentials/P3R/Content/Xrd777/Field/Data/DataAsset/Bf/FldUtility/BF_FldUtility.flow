import( "Original_BF_FldUtility.bf" );
import( "../../../../../../../../../ModMenu.flow" );

void Fld_Utility_Main_Proc_hook()
{
    while (true)
        if (ModMenuDisplay() == 0)
            return;
}

int ModMenuDisplay()
{
    while (true)
    {
        int selection = SEL_GENERIC_EX( 5, 8, 7, 1, 0 );
        switch (selection)
        {
            case 0:
                // Original function
                Fld_Utility_Main_Proc_unhooked();
                return 0;
            case 1:
                CALL_LMAP(0);
                return 0;
            case 2:
                if (FacilityMenuDisplay() == -1)
                    break;
                else
                    return 0;
            case 3:
                if (CallMenuDisplay() == -1)
                    break;
                else
                    return 0;
            case 4:
                if (PlayerMenuDisplay() == -1)
                    break;
                else
                    return 0;
            case 5:
                if (FlagMenuDisplay() == -1)
                    break;
                else
                    return 0;
            case -1:
                return 0;
        }
    }
    return -1;
}